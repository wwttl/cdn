var TouchSlide=function(a){a=a||{};var b={slideCell:a.slideCell||"#touchSlide",titCell:a.titCell||".hd li",mainCell:a.mainCell||".bd",effect:a.effect||"left",autoPlay:a.autoPlay||!1,delayTime:a.delayTime||200,interTime:a.interTime||2500,defaultIndex:a.defaultIndex||0,titOnClassName:a.titOnClassName||"on",autoPage:a.autoPage||!1,prevCell:a.prevCell||".prev",nextCell:a.nextCell||".next",pageStateCell:a.pageStateCell||".pageState",pnLoop:"undefined "==a.pnLoop?!0:a.pnLoop,startFun:a.startFun||null,endFun:a.endFun||null,switchLoad:a.switchLoad||null},c=document.getElementById(b.slideCell.replace("#",""));if(!c)return!1;var d=function(a,b){a=a.split(" ");var c=[];b=b||document;var d=[b];for(var e in a)0!=a[e].length&&c.push(a[e]);for(var e in c){if(0==d.length)return!1;var f=[];for(var g in d)if("#"==c[e][0])f.push(document.getElementById(c[e].replace("#","")));else if("."==c[e][0])for(var h=d[g].getElementsByTagName("*"),i=0;i<h.length;i++){var j=h[i].className;j&&-1!=j.search(new RegExp("\\b"+c[e].replace(".","")+"\\b"))&&f.push(h[i])}else for(var h=d[g].getElementsByTagName(c[e]),i=0;i<h.length;i++)f.push(h[i]);d=f}return 0==d.length||d[0]==b?!1:d},e=function(a,b){var c=document.createElement("div");c.innerHTML=b,c=c.children[0];var d=a.cloneNode(!0);return c.appendChild(d),a.parentNode.replaceChild(c,a),l=d,c},f=function(a,b){!a||!b||a.className&&-1!=a.className.search(new RegExp("\\b"+b+"\\b"))||(a.className+=(a.className?" ":"")+b)},g=function(a,b){!a||!b||a.className&&-1==a.className.search(new RegExp("\\b"+b+"\\b"))||(a.className=a.className.replace(new RegExp("\\s*\\b"+b+"\\b","g"),""))},h=b.effect,i=d(b.prevCell,c)[0],j=d(b.nextCell,c)[0],k=d(b.pageStateCell)[0],l=d(b.mainCell,c)[0];if(!l)return!1;var m,n,o=l.children.length,p=d(b.titCell,c),q=p?p.length:o,r=b.switchLoad,s=parseInt(b.defaultIndex),t=parseInt(b.delayTime),u=parseInt(b.interTime),v="false"==b.autoPlay||0==b.autoPlay?!1:!0,w="false"==b.autoPage||0==b.autoPage?!1:!0,x="false"==b.pnLoop||0==b.pnLoop?!1:!0,y=s,z=null,A=null,B=null,C=0,D=0,E=0,F=0,G=/hp-tablet/gi.test(navigator.appVersion),H="ontouchstart"in window&&!G,I=H?"touchstart":"mousedown",J=H?"touchmove":"",K=H?"touchend":"mouseup",L=l.parentNode.clientWidth,M=o;if(0==q&&(q=o),w){q=o,p=p[0],p.innerHTML="";var N="";if(1==b.autoPage||"true"==b.autoPage)for(var O=0;q>O;O++)N+="<li>"+(O+1)+"</li>";else for(var O=0;q>O;O++)N+=b.autoPage.replace("$",O+1);p.innerHTML=N,p=p.children}"leftLoop"==h&&(M+=2,l.appendChild(l.children[0].cloneNode(!0)),l.insertBefore(l.children[o-1].cloneNode(!0),l.children[0])),m=e(l,'<div class="tempWrap" style="overflow:hidden; position:relative;"></div>'),l.style.cssText="width:"+M*L+"px;position:relative;overflow:hidden;padding:0;margin:0;";for(var O=0;M>O;O++)l.children[O].style.cssText="display:table-cell;vertical-align:top;width:"+L+"px";var P=function(){"function"==typeof b.startFun&&b.startFun(s,q)},Q=function(){"function"==typeof b.endFun&&b.endFun(s,q)},R=function(a){var b=("leftLoop"==h?s+1:s)+a,c=function(a){for(var b=l.children[a].getElementsByTagName("img"),c=0;c<b.length;c++)b[c].getAttribute(r)&&(b[c].setAttribute("src",b[c].getAttribute(r)),b[c].removeAttribute(r))};if(c(b),"leftLoop"==h)switch(b){case 0:c(o);break;case 1:c(o+1);break;case o:c(0);break;case o+1:c(1)}},S=function(){L=m.clientWidth,l.style.width=M*L+"px";for(var a=0;M>a;a++)l.children[a].style.width=L+"px";var b="leftLoop"==h?s+1:s;T(-b*L,0)};window.addEventListener("resize",S,!1);var T=function(a,b,c){c=c?c.style:l.style,c.webkitTransitionDuration=c.MozTransitionDuration=c.msTransitionDuration=c.OTransitionDuration=c.transitionDuration=b+"ms",c.webkitTransform="translate("+a+"px,0)translateZ(0)",c.msTransform=c.MozTransform=c.OTransform="translateX("+a+"px)"},U=function(a){switch(h){case"left":s>=q?s=a?s-1:0:0>s&&(s=a?0:q-1),null!=r&&R(0),T(-s*L,t),y=s;break;case"leftLoop":null!=r&&R(0),T(-(s+1)*L,t),-1==s?(A=setTimeout(function(){T(-q*L,0)},t),s=q-1):s==q&&(A=setTimeout(function(){T(-L,0)},t),s=0),y=s}P(),B=setTimeout(function(){Q()},t);for(var c=0;q>c;c++)g(p[c],b.titOnClassName),c==s&&f(p[c],b.titOnClassName);0==x&&(g(j,"nextStop"),g(i,"prevStop"),0==s?f(i,"prevStop"):s==q-1&&f(j,"nextStop")),k&&(k.innerHTML="<span>"+(s+1)+"</span>/"+q)};if(U(),v&&(z=setInterval(function(){s++,U()},u)),p)for(var O=0;q>O;O++)!function(){var a=O;p[a].addEventListener("click",function(){clearTimeout(A),clearTimeout(B),s=a,U()})}();j&&j.addEventListener("click",function(){(1==x||s!=q-1)&&(clearTimeout(A),clearTimeout(B),s++,U())}),i&&i.addEventListener("click",function(){(1==x||0!=s)&&(clearTimeout(A),clearTimeout(B),s--,U())});var V=function(a){clearTimeout(A),clearTimeout(B),n=void 0,E=0;var b=H?a.touches[0]:a;C=b.pageX,D=b.pageY,l.addEventListener(J,W,!1),l.addEventListener(K,X,!1)},W=function(a){if(!H||!(a.touches.length>1||a.scale&&1!==a.scale)){var b=H?a.touches[0]:a;if(E=b.pageX-C,F=b.pageY-D,"undefined"==typeof n&&(n=!!(n||Math.abs(E)<Math.abs(F))),!n){switch(a.preventDefault(),v&&clearInterval(z),h){case"left":(0==s&&E>0||s>=q-1&&0>E)&&(E=.4*E),T(-s*L+E,0);break;case"leftLoop":T(-(s+1)*L+E,0)}null!=r&&Math.abs(E)>L/3&&R(E>-0?-1:1)}}},X=function(a){0!=E&&(a.preventDefault(),n||(Math.abs(E)>L/10&&(E>0?s--:s++),U(!0),v&&(z=setInterval(function(){s++,U()},u))),l.removeEventListener(J,W,!1),l.removeEventListener(K,X,!1))};l.addEventListener(I,V,!1)};